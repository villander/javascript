// Version: 3.8.0
(function(){
window.JSON&&window.JSON.stringify||function(){function toJSON(e){try{return this.valueOf()}catch(n){return null}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var n=meta[e];return"string"==typeof n?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,n){var t,r,i,o,c,a=gap,u=n[e];switch(u&&"object"==typeof u&&(u=toJSON.call(u,e)),"function"==typeof rep&&(u=rep.call(n,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,c=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,t=0;o>t;t+=1)c[t]=str(t,u)||"null";return i=0===c.length?"[]":gap?"[\n"+gap+c.join(",\n"+gap)+"\n"+a+"]":"["+c.join(",")+"]",gap=a,i}if(rep&&"object"==typeof rep)for(o=rep.length,t=0;o>t;t+=1)r=rep[t],"string"==typeof r&&(i=str(r,u),i&&c.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&c.push(quote(r)+(gap?": ":":")+i));return i=0===c.length?"{}":gap?"{\n"+gap+c.join(",\n"+gap)+"\n"+a+"}":"{"+c.join(",")+"}",gap=a,i}}window.JSON||(window.JSON={});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,n,t){var r;if(gap="",indent="","number"==typeof t)for(r=0;t>r;r+=1)indent+=" ";else"string"==typeof t&&(indent=t);if(rep=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text){return eval("("+text+")")})}(),function(){function e(){return"x"+ ++A+ +new Date}function t(){return+new Date}function r(e,n){var t=e.join(R),r=[];return n?(f(n,function(e,n){var t="object"==typeof n?JSON.stringify(n):n;"undefined"!=typeof n&&null!=n&&h(t).length>0&&r.push(e+"="+h(t))}),t+="?"+r.join(K)):t}function i(e,n){var r,i=0,o=function(){i+n>t()?(clearTimeout(r),r=setTimeout(o,n)):(i=t(),e())};return o}function o(e,n){var t=[];return f(e||[],function(e){n(e)&&t.push(e)}),t}function c(e,n){return e.replace(G,function(e,t){return n[t]||e})}function a(e,n){return setTimeout(e,n)}function u(e){var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0,t="x"==e?n:3&n|8;return t.toString(16)});return e&&e(n),n}function s(e){return!!e&&"string"!=typeof e&&(Array.isArray&&Array.isArray(e)||"number"==typeof e.length)}function f(e,n){if(e&&n)if(s(e))for(var t=0,r=e.length;r>t;)n.call(e[t],e[t],t++);else for(var t in e)e.hasOwnProperty&&e.hasOwnProperty(t)&&n.call(e[t],t,e[t])}function l(e,n){var t=[];return f(e||[],function(e,r){t.push(n(e,r))}),t}function p(e){return encodeURIComponent(e).replace(/[!'()*~]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function h(e){return encodeURIComponent(e)}function d(e,n){var t=[];return f(e,function(e,r){n?e.search("-pnpres")<0&&r.subscribed&&t.push(e):r.subscribed&&t.push(e)}),t.sort()}function g(e,n){var t=[];return f(e,function(e,r){n?e.search("-pnpres")<0&&r.subscribed&&t.push(e):r.subscribed&&t.push(e)}),t.sort()}function y(){P||(P=1,f(N,function(e){e()}))}function b(e){return msg=e||{apns:{}},msg.getPubnubMessage=function(){var e={};if(Object.keys(msg.apns).length){e.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var n in msg.apns)e.pn_apns[n]=msg.apns[n];var t=["badge","alert"];for(var n in t)delete e.pn_apns[t[n]]}msg.gcm&&(e.pn_gcm={data:msg.gcm});for(var n in msg)e[n]=msg[n];var r=["apns","gcm","publish","channel","callback","error"];for(var n in r)delete e[r[n]];return e},msg.publish=function(){var e=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:e,channel:msg.channel,callback:msg.callback,error:msg.error})},msg}function v(b){function v(e){return e||(e={}),f(Pe,function(n,t){n in e||(e[n]=t)}),e}function _(e){var n=[];return f(e,function(e,t){n.push(e)}),n}function m(e){return _(e).sort()}function S(e){var n="",t=m(e);for(var r in t){var i=t[r];n+=i+"="+p(e[i]),r!=t.length-1&&(n+="&")}return n}function x(e,n,t){var r=!1;if("undefined"==typeof e)return n;if("number"==typeof e)r=e>U||0==e?!1:!0;else{if("boolean"==typeof e)return e?H:0;r=!0}return r?(t&&t("Presence Heartbeat value invalid. Valid range ( x > "+U+" or x = 0). Current Value : "+(n||U)),n||U):e}function w(e,n){return Ie.encrypt(e,n||ze)||e}function C(e,n){return Ie.decrypt(e,n||ze)||Ie.decrypt(e,ze)||e}function O(){return clearTimeout(Ce),!Ee||Ee>=500||1>Ee||!d(Se,!0).length&&!g(xe,!0).length?void(Be=!1):(Be=!0,void Ge.presence_heartbeat({callback:function(e){Ce=a(O,Ee*F)},error:function(e){Ne&&Ne("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(e)),Ce=a(O,Ee*F)}}))}function E(){!Be&&O()}function B(e){if(Me){if(!he.length)return}else{if(e&&(he.sending=0),he.sending||!he.length)return;he.sending=1}Ae(he.shift())}function M(e){var n=0;return f(g(xe),function(t){var r=xe[t];r&&(n++,(e||function(){})(r))}),n}function L(e){var n=0;return f(d(Se),function(t){var r=Se[t];r&&(n++,(e||function(){})(r))}),n}function A(e,n,t){if("object"==typeof e){if(e.error){var r={};return e.message&&(r.message=e.message),e.payload&&(r.payload=e.payload),void(t&&t(r))}if(e.payload)return void(e.next_page?n&&n(e.payload,e.next_page):n&&n(e.payload))}n&&n(e)}function D(e,n){if("object"==typeof e&&e.error){var t={};return e.message&&(t.message=e.message),e.payload&&(t.payload=e.payload),void(n&&n(t))}n&&n(e)}function R(e,n,t,r){var n=e.callback||n,i=e.error||Ne,o=je();r=r||{},r.auth||(r.auth=e.auth_key||oe);var c=[fe,"v1","channel-registration","sub-key",ie];c.push.apply(c,t),o&&(r.callback=o),Ae({callback:o,data:v(r),success:function(e){A(e,n,i)},fail:function(e){D(e,i)},url:c})}function K(){Je()||W(1,{error:"Offline. Please check your network settings. "}),$&&clearTimeout($),$=a(K,F)}function G(){ne&&Ge.time(function(e){V(function(){},e),e||W(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),Y&&clearTimeout(Y),Y=a(G,ee)})}function W(e,n){ve&&ve(e,n),ve=null,clearTimeout($),clearTimeout(Y)}function X(e){var n=t()-ge;return n-e/1e4}function V(e,n){function r(n){if(n){var r=n/1e4,o=(t()-i)/2;ge=t()-(r+o),e&&e(ge)}}var i=t();n&&r(n)||Ge.time(r)}var $,Y,Q=+b.windowing||j,Z=(+b.timeout||z)*F,ee=(+b.keepalive||T)*F,ne=b.timecheck||0,te=b.noleave||0,re=b.publish_key,ie=b.subscribe_key,oe=b.auth_key||"",ce=b.secret_key||"",ae=b.hmac_SHA256,ue=b.ssl?"s":"",se="http"+ue+"://"+(b.origin||"pubsub.pubnub.com"),fe=q(se),le=q(se),pe=function(){},he=[],de=!0,ge=0,ye=0,be=0,ve=0,_e=b.restore||0,me=0,ke=!1,Se={},xe={},we={},Ce=null,Oe=x(b.heartbeat||b.pnexpires||0,b.error),Ee=b.heartbeat_interval||Oe/2-1,Be=!1,Me=b.no_wait_for_pending,Le=b["compatible_3.5"]||!1,Ae=b.xdr,Pe=b.params||{},Ne=b.error||function(){},Je=b._is_online||function(){return 1},je=b.jsonp_cb||function(){return 0},De=b.db||{get:function(){},set:function(){}},ze=b.cipher_key,Te=b.uuid||!b.unique_uuid&&De&&De.get(ie+"uuid")||"",Fe=b.instance_id||!1,Re="",Ke=b.shutdown,Ue="undefined"!=typeof b.use_send_beacon?b.use_send_beacon:!0,He=Ue?b.sendBeacon:null;2===Oe&&(Ee=1);var Ie=b.crypto_obj||{encrypt:function(e,n){return e},decrypt:function(e,n){return e}},Ge={LEAVE:function(e,n,t,i,o){var c,a,u={uuid:Te,auth:t||oe},s=q(se),i=i||function(){},f=o||function(){},l=je();if(e.indexOf(J)>0)return!0;if(Le){if(!ue)return!1;if("0"==l)return!1}return te?!1:("0"!=l&&(u.callback=l),Fe&&(u.instanceid=Re),c=[s,"v2","presence","sub_key",ie,"channel",h(e),"leave"],a=v(u),He&&(url_string=r(c,a),He(url_string))?(i&&i({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Ae({blocking:n||ue,callback:l,data:a,success:function(e){A(e,i,f)},fail:function(e){D(e,f)},url:c}),!0))},LEAVE_GROUP:function(e,n,t,i,o){var c,a,u={uuid:Te,auth:t||oe},s=q(se),i=i||function(){},f=o||function(){},l=je();if(e.indexOf(J)>0)return!0;if(Le){if(!ue)return!1;if("0"==l)return!1}return te?!1:("0"!=l&&(u.callback=l),e&&e.length>0&&(u["channel-group"]=e),Fe&&(u.instanceid=Re),c=[s,"v2","presence","sub_key",ie,"channel",h(","),"leave"],a=v(u),He&&(url_string=r(c,a),He(url_string))?(i&&i({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Ae({blocking:n||ue,callback:l,data:a,success:function(e){A(e,i,f)},fail:function(e){D(e,f)},url:c}),!0))},set_resumed:function(e){ke=e},get_cipher_key:function(){return ze},set_cipher_key:function(e){ze=e},raw_encrypt:function(e,n){return w(e,n)},raw_decrypt:function(e,n){return C(e,n)},get_heartbeat:function(){return Oe},set_heartbeat:function(e,n){Oe=x(e,Oe,Ne),Ee=n||Oe/2-1,2==Oe&&(Ee=1),pe(),O()},get_heartbeat_interval:function(){return Ee},set_heartbeat_interval:function(e){Ee=e,O()},get_version:function(){return I},getGcmMessageObject:function(e){return{data:e}},getApnsMessageObject:function(e){var n={aps:{badge:1,alert:""}};for(k in e)k[n]=e[k];return n},newPnMessage:function(){var e={};gcm&&(e.pn_gcm=gcm),apns&&(e.pn_apns=apns);for(k in n)e[k]=n[k];return e},_add_param:function(e,n){Pe[e]=n},channel_group:function(e,n){var t,r,i=e.channel_group,n=n||e.callback,o=e.channels||e.channel,c=e.cloak,a=[],u={},f=e.mode||"add";if(i){var l=i.split(":");l.length>1?(t="*"===l[0]?null:l[0],r=l[1]):r=l[0]}t&&a.push("namespace")&&a.push(h(t)),a.push("channel-group"),r&&"*"!==r&&a.push(r),o?(s(o)&&(o=o.join(",")),u[f]=o,u.cloak=de?"true":"false"):"remove"===f&&a.push("remove"),"undefined"!=typeof c&&(u.cloak=c?"true":"false"),R(e,n,a,u)},channel_group_list_groups:function(e,n){var t;t=e.namespace||e.ns||e.channel_group||null,t&&(e.channel_group=t+":*"),Ge.channel_group(e,n)},channel_group_list_channels:function(e,n){return e.channel_group?void Ge.channel_group(e,n):Ne("Missing Channel Group")},channel_group_remove_channel:function(e,n){return e.channel_group?e.channel||e.channels?(e.mode="remove",void Ge.channel_group(e,n)):Ne("Missing Channel"):Ne("Missing Channel Group")},channel_group_remove_group:function(e,n){return e.channel_group?e.channel?Ne("Use channel_group_remove_channel if you want to remove a channel from a group."):(e.mode="remove",void Ge.channel_group(e,n)):Ne("Missing Channel Group")},channel_group_add_channel:function(e,n){return e.channel_group?e.channel||e.channels?void Ge.channel_group(e,n):Ne("Missing Channel"):Ne("Missing Channel Group")},channel_group_cloak:function(e,n){return"undefined"==typeof e.cloak?void n(de):(de=e.cloak,void Ge.channel_group(e,n))},channel_group_list_namespaces:function(e,n){var t=["namespace"];R(e,n,t)},channel_group_remove_namespace:function(e,n){var t=["namespace",e.namespace,"remove"];R(e,n,t)},history:function(e,n){var n=e.callback||n,t=e.count||e.limit||100,r=e.reverse||"false",i=e.error||function(){},o=e.auth_key||oe,c=e.cipher_key,a=e.channel,u=e.channel_group,s=e.start,f=e.end,l=e.include_token,p=e.string_message_token||!1,d={},g=je();return a||u?n?ie?(d.stringtoken="true",d.count=t,d.reverse=r,d.auth=o,u&&(d["channel-group"]=u,a||(a=",")),g&&(d.callback=g),s&&(d.start=s),f&&(d.end=f),l&&(d.include_token="true"),p&&(d.string_message_token="true"),void Ae({callback:g,data:v(d),success:function(e){if("object"==typeof e&&e.error)return void i({message:e.message,payload:e.payload});for(var t=e[0],r=[],o=0;o<t.length;o++)if(l){var a=C(t[o].message,c),u=t[o].timetoken;try{r.push({message:JSON.parse(a),timetoken:u})}catch(s){r.push({message:a,timetoken:u})}}else{var a=C(t[o],c);try{r.push(JSON.parse(a))}catch(s){r.push(a)}}n([r,e[1],e[2]])},fail:function(e){D(e,i)},url:[fe,"v2","history","sub-key",ie,"channel",h(a)]})):Ne("Missing Subscribe Key"):Ne("Missing Callback"):Ne("Missing Channel")},replay:function(e,n){var t,n=n||e.callback||function(){},r=e.auth_key||oe,i=e.source,o=e.destination,c=e.stop,a=e.start,u=e.end,s=e.reverse,f=e.limit,l=je(),p={};return i?o?re?ie?("0"!=l&&(p.callback=l),c&&(p.stop="all"),s&&(p.reverse="true"),a&&(p.start=a),u&&(p.end=u),f&&(p.count=f),p.auth=r,t=[fe,"v1","replay",re,ie,i,o],void Ae({callback:l,success:function(e){A(e,n,err)},fail:function(){n([0,"Disconnected"])},url:t,data:v(p)})):Ne("Missing Subscribe Key"):Ne("Missing Publish Key"):Ne("Missing Destination Channel"):Ne("Missing Source Channel")},auth:function(e){oe=e,pe()},time:function(e){var n=je(),t={uuid:Te,auth:oe};Fe&&(t.instanceid=Re),Ae({callback:n,data:v(t),url:[fe,"time",n],success:function(n){e(n[0])},fail:function(){e(0)}})},publish:function(e,n){var t=e.message;if(!t)return Ne("Missing Message");var r,i,n=n||e.callback||t.callback||e.success||function(){},o=e.channel||t.channel,c=e.auth_key||oe,a=e.cipher_key,u=e.error||t.error||function(){},s=e.post||!1,f="store_in_history"in e?e.store_in_history:!0,l=je(),p="push";return e.prepend&&(p="unshift"),o?re?ie?(t.getPubnubMessage&&(t=t.getPubnubMessage()),t=JSON.stringify(w(t,a)),i=[fe,"publish",re,ie,0,h(o),l,h(t)],r={uuid:Te,auth:c},f||(r.store="0"),Fe&&(r.instanceid=Re),he[p]({callback:l,url:i,data:v(r),fail:function(e){D(e,u),B(1)},success:function(e){A(e,n,u),B(1)},mode:s?"POST":"GET"}),void B()):Ne("Missing Subscribe Key"):Ne("Missing Publish Key"):Ne("Missing Channel")},unsubscribe:function(e,n){var t=e.channel,r=e.channel_group,i=e.auth_key||oe,n=n||e.callback||function(){},o=e.error||function(){};if(me=0,_e=1,!t&&!r)return Ne("Missing Channel or Channel Group");if(!ie)return Ne("Missing Subscribe Key");if(t){var c=s(t)?t:(""+t).split(","),a=[],u=[];if(f(c,function(e){Se[e]&&a.push(e)}),0==a.length)return void n({action:"leave"});f(a,function(e){u.push(e+J)}),f(a.concat(u),function(e){e in Se&&(Se[e]=0),e in we&&delete we[e]});var l=!0;P&&(l=Ge.LEAVE(a.join(","),0,i,n,o)),l||n({action:"leave"})}if(r){var p=s(r)?r:(""+r).split(","),h=[],d=[];if(f(p,function(e){xe[e]&&h.push(e)}),0==h.length)return void n({action:"leave"});f(h,function(e){d.push(e+J)}),f(h.concat(d),function(e){e in xe&&(xe[e]=0),e in we&&delete we[e]});var l=!0;P&&(l=Ge.LEAVE_GROUP(h.join(","),0,i,n,o)),l||n({action:"leave"})}pe()},subscribe:function(e,n){function r(e){e?a(pe,w):(fe=q(se,1),le=q(se,1),a(function(){Ge.time(r)},F)),L(function(n){return e&&n.disconnected?(n.disconnected=0,n.reconnect(n.name)):void(e||n.disconnected||(n.disconnected=1,n.disconnect(n.name)))}),M(function(n){return e&&n.disconnected?(n.disconnected=0,n.reconnect(n.name)):void(e||n.disconnected||(n.disconnected=1,n.disconnect(n.name)))})}function i(){var e=je(),n=d(Se).join(","),t=g(xe).join(",");if(n||t){n||(n=","),W();var o=v({uuid:Te,auth:oe});t&&(o["channel-group"]=t);var c=JSON.stringify(we);c.length>2&&(o.state=JSON.stringify(we)),Oe&&(o.heartbeat=Oe),Fe&&(o.instanceid=Re),E(),ve=Ae({timeout:x,callback:e,fail:function(e){e&&e.error&&e.service?(D(e,y),r(1)):Ge.time(function(n){!n&&D(e,y),r(n)})},data:v(o),url:[le,"subscribe",ie,h(n),e,me],success:function(e){if(!e||"object"==typeof e&&"error"in e&&e.error)return y(e.error),a(pe,F);if(b(e[1]),me=!me&&_e&&De.get(ie)||e[1],L(function(e){e.connected||(e.connected=1,e.connect(e.name))}),M(function(e){e.connected||(e.connected=1,e.connect(e.name))}),ke&&!_e)return me=0,ke=!1,De.set(ie,0),void a(i,w);k&&(me=1e4,k=0),De.set(ie,e[1]);var n=function(){var n="",t="";e.length>3?(n=e[3],t=e[2]):n=e.length>2?e[2]:l(d(Se),function(n){return l(Array(e[0].length).join(",").split(","),function(){return n})}).join(",");var r=n.split(","),i=t?t.split(","):[];return function(){var e=r.shift()||be,n=i.shift(),t={};n?(e&&e.indexOf("-pnpres")>=0&&n.indexOf("-pnpres")<0&&(n+="-pnpres"),t=xe[n]||Se[n]||{callback:function(){}}):t=Se[e];var o=[t.callback||ye,e.split(J)[0]];return n&&o.push(n.split(J)[0]),o}}(),t=X(+e[1]);f(e[0],function(r){var i=n(),o=C(r,Se[i[1]]?Se[i[1]].cipher_key:null);i[0]&&i[0](o,e,i[2]||i[1],t,i[1])}),a(i,w)}})}}var o=e.channel,c=e.channel_group,n=n||e.callback,n=n||e.message,u=e.connect||function(){},s=e.reconnect||function(){},p=e.disconnect||function(){},y=e.error||y||function(){},b=e.idle||function(){},_=e.presence||0,m=e.noheresync||0,k=e.backfill||0,S=e.timetoken||0,x=e.timeout||Z,w=e.windowing||Q,O=e.state,B=e.heartbeat||e.pnexpires,A=e.heartbeat_interval,j=e.restore||_e;return oe=e.auth_key||oe,_e=j,me=S,o||c?n?ie?((B||0===B||A||0===A)&&Ge.set_heartbeat(B,A),o&&f((o.join?o.join(","):""+o).split(","),function(r){var i=Se[r]||{};Se[be=r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:ye=n,cipher_key:e.cipher_key,connect:u,disconnect:p,reconnect:s},O&&(r in O?we[r]=O[r]:we[r]=O),_&&(Ge.subscribe({channel:r+J,callback:_,restore:j}),i.subscribed||m||Ge.here_now({channel:r,data:v({uuid:Te,auth:oe}),callback:function(e){f("uuids"in e?e.uuids:[],function(n){_({action:"join",uuid:n,timestamp:Math.floor(t()/1e3),occupancy:e.occupancy||1},e,r)})}}))}),c&&f((c.join?c.join(","):""+c).split(","),function(r){var i=xe[r]||{};xe[r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:ye=n,cipher_key:e.cipher_key,connect:u,disconnect:p,reconnect:s},_&&(Ge.subscribe({channel_group:r+J,callback:_,restore:j,auth_key:oe}),i.subscribed||m||Ge.here_now({channel_group:r,data:v({uuid:Te,auth:oe}),callback:function(e){f("uuids"in e?e.uuids:[],function(n){_({action:"join",uuid:n,timestamp:Math.floor(t()/1e3),occupancy:e.occupancy||1},e,r)})}}))}),pe=function(){W(),a(i,w)},P?void pe():N.push(pe)):Ne("Missing Subscribe Key"):Ne("Missing Callback"):Ne("Missing Channel")},here_now:function(e,n){var n=e.callback||n,t=e.debug,r=e.error||function(){},i=e.auth_key||oe,o=e.channel,c=e.channel_group,a=je(),u="uuids"in e?e.uuids:!0,s=e.state,f={uuid:Te,auth:i};if(u||(f.disable_uuids=1),s&&(f.state=1),!n)return Ne("Missing Callback");if(!ie)return Ne("Missing Subscribe Key");var l=[fe,"v2","presence","sub_key",ie];o&&l.push("channel")&&l.push(h(o)),"0"!=a&&(f.callback=a),c&&(f["channel-group"]=c,!o&&l.push("channel")&&l.push(",")),Fe&&(f.instanceid=Re),Ae({callback:a,data:v(f),success:function(e){A(e,n,r)},fail:function(e){D(e,r)},debug:t,url:l})},where_now:function(e,n){var n=e.callback||n,t=e.error||function(){},r=e.auth_key||oe,i=je(),o=e.uuid||Te,c={auth:r};return n?ie?("0"!=i&&(c.callback=i),Fe&&(c.instanceid=Re),void Ae({callback:i,data:v(c),success:function(e){A(e,n,t)},fail:function(e){D(e,t)},url:[fe,"v2","presence","sub_key",ie,"uuid",h(o)]})):Ne("Missing Subscribe Key"):Ne("Missing Callback")},state:function(e,n){var t,n=e.callback||n||function(e){},r=e.error||function(){},i=e.auth_key||oe,o=je(),c=e.state,a=e.uuid||Te,u=e.channel,s=e.channel_group,f=v({auth:i});return ie?a?u||s?("0"!=o&&(f.callback=o),"undefined"!=typeof u&&Se[u]&&Se[u].subscribed&&c&&(we[u]=c),"undefined"!=typeof s&&xe[s]&&xe[s].subscribed&&(c&&(we[s]=c),f["channel-group"]=s,u||(u=",")),f.state=JSON.stringify(c),Fe&&(f.instanceid=Re),t=c?[fe,"v2","presence","sub-key",ie,"channel",u,"uuid",a,"data"]:[fe,"v2","presence","sub-key",ie,"channel",u,"uuid",h(a)],void Ae({callback:o,data:v(f),success:function(e){A(e,n,r)},fail:function(e){D(e,r)},url:t})):Ne("Missing Channel"):Ne("Missing UUID"):Ne("Missing Subscribe Key")},grant:function(e,n){var n=e.callback||n,t=e.error||function(){},r=e.channel||e.channels,i=e.channel_group,o=je(),c=e.ttl,a=e.read?"1":"0",u=e.write?"1":"0",f=e.manage?"1":"0",l=e.auth_key||e.auth_keys;if(!n)return Ne("Missing Callback");if(!ie)return Ne("Missing Subscribe Key");if(!re)return Ne("Missing Publish Key");if(!ce)return Ne("Missing Secret Key");var p=Math.floor((new Date).getTime()/1e3),h=ie+"\n"+re+"\ngrant\n",d={w:u,r:a,timestamp:p};e.manage&&(d.m=f),s(r)&&(r=r.join(",")),s(l)&&(l=l.join(",")),"undefined"!=typeof r&&null!=r&&r.length>0&&(d.channel=r),"undefined"!=typeof i&&null!=i&&i.length>0&&(d["channel-group"]=i),"0"!=o&&(d.callback=o),(c||0===c)&&(d.ttl=c),l&&(d.auth=l),d=v(d),l||delete d.auth,h+=S(d);var g=ae(h,ce);g=g.replace(/\+/g,"-"),g=g.replace(/\//g,"_"),d.signature=g,Ae({callback:o,data:d,success:function(e){A(e,n,t)},fail:function(e){D(e,t)},url:[fe,"v1","auth","grant","sub-key",ie]})},mobile_gw_provision:function(e){var n,t,r=e.callback||function(){},i=e.auth_key||oe,o=e.error||function(){},c=je(),a=e.channel,u=e.op,s=e.gw_type,f=e.device_id;return f?s?u?a?re?ie?(t=[fe,"v1/push/sub-key",ie,"devices",f],n={uuid:Te,auth:i,type:s},"add"==u?n.add=a:"remove"==u&&(n.remove=a),Fe&&(data.instanceid=Re),void Ae({callback:c,data:n,success:function(e){A(e,r,o)},fail:function(e){D(e,o)},url:t})):Ne("Missing Subscribe Key"):Ne("Missing Publish Key"):Ne("Missing gw destination Channel (channel)"):Ne("Missing GW Operation (op: add or remove)"):Ne("Missing GW Type (gw_type: gcm or apns)"):Ne("Missing Device ID (device_id)")},audit:function(e,n){var n=e.callback||n,t=e.error||function(){},r=e.channel,i=e.channel_group,o=e.auth_key,c=je();if(!n)return Ne("Missing Callback");if(!ie)return Ne("Missing Subscribe Key");if(!re)return Ne("Missing Publish Key");if(!ce)return Ne("Missing Secret Key");var a=Math.floor((new Date).getTime()/1e3),u=ie+"\n"+re+"\naudit\n",s={timestamp:a};"0"!=c&&(s.callback=c),"undefined"!=typeof r&&null!=r&&r.length>0&&(s.channel=r),"undefined"!=typeof i&&null!=i&&i.length>0&&(s["channel-group"]=i),o&&(s.auth=o),s=v(s),o||delete s.auth,u+=S(s);var f=ae(u,ce);f=f.replace(/\+/g,"-"),f=f.replace(/\//g,"_"),s.signature=f,Ae({callback:c,data:s,success:function(e){A(e,n,t)},fail:function(e){D(e,t)},url:[fe,"v1","auth","audit","sub-key",ie]})},revoke:function(e,n){e.read=!1,e.write=!1,Ge.grant(e,n)},set_uuid:function(e){Te=e,pe()},get_uuid:function(){return Te},isArray:function(e){return s(e)},get_subscribed_channels:function(){return d(Se,!0)},presence_heartbeat:function(e){var n=e.callback||function(){},t=e.error||function(){},r=je(),i={uuid:Te,auth:oe},o=JSON.stringify(we);o.length>2&&(i.state=JSON.stringify(we)),Oe>0&&320>Oe&&(i.heartbeat=Oe),"0"!=r&&(i.callback=r);var c=h(d(Se,!0).join(",")),a=g(xe,!0).join(",");c||(c=","),a&&(i["channel-group"]=a),Fe&&(i.instanceid=Re),Ae({callback:r,data:v(i),url:[fe,"v2","presence","sub-key",ie,"channel",c,"heartbeat"],success:function(e){A(e,n,t)},fail:function(e){D(e,t)}})},stop_timers:function(){clearTimeout($),clearTimeout(Y),clearTimeout(Ce)},shutdown:function(){Ge.stop_timers(),Ke&&Ke()},xdr:Ae,ready:y,db:De,uuid:u,map:l,each:f,"each-channel":L,grep:o,offline:function(){W(1,{message:"Offline. Please check your network settings."})},supplant:c,now:t,unique:e,updater:i};return Te||(Te=Ge.uuid()),Re||(Re=Ge.uuid()),De.set(ie+"uuid",Te),$=a(K,F),Y=a(G,ee),Ce=a(E,(Ee-3)*F),V(),Ge}function _(){function e(e){return CryptoJS.SHA256(e).toString(CryptoJS.enc.Hex)}function n(e){return e=e||{},e.hasOwnProperty("encryptKey")||(e.encryptKey=f.encryptKey),e.hasOwnProperty("keyEncoding")||(e.keyEncoding=f.keyEncoding),e.hasOwnProperty("keyLength")||(e.keyLength=f.keyLength),e.hasOwnProperty("mode")||(e.mode=f.mode),-1==a.indexOf(e.keyEncoding.toLowerCase())&&(e.keyEncoding=f.keyEncoding),-1==u.indexOf(parseInt(e.keyLength,10))&&(e.keyLength=f.keyLength),-1==s.indexOf(e.mode.toLowerCase())&&(e.mode=f.mode),e}function t(e,n){return"base64"==n.keyEncoding?CryptoJS.enc.Base64.parse(e):"hex"==n.keyEncoding?CryptoJS.enc.Hex.parse(e):e}function r(n,r){return n=t(n,r),r.encryptKey?CryptoJS.enc.Utf8.parse(e(n).slice(0,32)):n}function i(e){return"ecb"==e.mode?CryptoJS.mode.ECB:CryptoJS.mode.CBC}function o(e){return"cbc"==e.mode?CryptoJS.enc.Utf8.parse(c):null}var c="0123456789012345",a=["hex","utf8","base64","binary"],u=[128,256],s=["ecb","cbc"],f={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(e,t,c){if(!t)return e;c=n(c);var a=o(c),u=i(c),s=r(t,c),f=JSON.stringify(e),l=CryptoJS.AES.encrypt(f,s,{iv:a,mode:u}).ciphertext,p=l.toString(CryptoJS.enc.Base64);return p||e},decrypt:function(e,t,c){if(!t)return e;c=n(c);var a=o(c),u=i(c),s=r(t,c);try{var f=CryptoJS.enc.Base64.parse(e),l=CryptoJS.AES.decrypt({ciphertext:f},s,{iv:a,mode:u}).toString(CryptoJS.enc.Utf8),p=JSON.parse(l);return p}catch(h){return}}}}function m(e){var n,t=function(){if(!o){o=1,clearTimeout(u);try{response=JSON.parse(n.responseText)}catch(e){return h(1)}l(response)}},i=0,o=0,c=e.timeout||D,u=a(function(){h(1)},c),s=e.data||{},f=e.fail||function(){},l=e.success||function(){},p="undefined"==typeof e.blocking,h=function(e,t){i||(i=1,clearTimeout(u),n&&(n.onerror=n.onload=null,n.abort&&n.abort(),n=null),e&&f(t))};try{n="undefined"!=typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest,n.onerror=n.onabort=function(){h(1,n.responseText||{error:"Network Connection Error"})},n.onload=n.onloadend=t,n.onreadystatechange=function(){if(n&&4==n.readyState)switch(n.status){case 200:break;default:try{response=JSON.parse(n.responseText),h(1,response)}catch(e){return h(1,{status:n.status,payload:null,message:n.responseText})}return}},s.pnsdk=W,url=r(e.url,s),n.open("GET",url,p),p&&(n.timeout=c),n.send()}catch(d){return h(0),m(e)}return h}function S(e,n,t){f(e.split(","),function(e){var r=function(e){e||(e=window.event),t(e)||(e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())};n.addEventListener?n.addEventListener(e,r,!1):n.attachEvent?n.attachEvent("on"+e,r):n["on"+e]=r})}function x(e){console.error(e)}function w(e,n,t){return t?void e.setAttribute(n,t):e&&e.getAttribute&&e.getAttribute(n)}function C(e){return document.getElementById(e)}function O(e,n){var t=[];return f(e.split(/\s+/),function(e){f((n||document).getElementsByTagName(e),function(e){t.push(e)})}),t}function E(e,n){for(var t in n)if(n.hasOwnProperty(t))try{e.style[t]=n[t]+("|width|height|top|left|".indexOf(t)>0&&"number"==typeof n[t]?"px":"")}catch(r){}}function B(e){return document.createElement(e)}function M(e,n){var t=CryptoJS.HmacSHA256(e,n);return t.toString(CryptoJS.enc.Base64)}function L(e){e.db=X,e.xdr=m,e.error=e.error||x,e.hmac_SHA256=M,e.crypto_obj=_(),e.params={pnsdk:W},SELF=function(e){return L(e)};var n=v(e);for(var t in n)n.hasOwnProperty(t)&&(SELF[t]=n[t]);return SELF.init=SELF,SELF.$=C,SELF.attr=w,SELF.search=O,SELF.bind=S,SELF.css=E,SELF.create=B,SELF.crypto_obj=_(),"undefined"!=typeof window&&S("beforeunload",window,function(){return SELF["each-channel"](function(e){SELF.LEAVE(e.name,1)}),!0}),e.notest?SELF:("undefined"!=typeof window&&S("offline",window,SELF.offline),"undefined"!=typeof document&&S("offline",document,SELF.offline),SELF.ready(),SELF)}var A=1,P=!1,N=[],J="-pnpres",j=10,D=15e3,z=310,T=60,F=1e3,R="/",K="&",U=5,H=30,I="'3.8.0'".replace(/'/g,""),G=/{([\w\-]+)}/g,q=function(){var e=20,n=Math.floor(Math.random()*e);return function(t,r){return t.indexOf("pubsub.")>0&&t.replace("pubsub","ps"+(r?u().split("-")[0]:++n<e?n:n=1))||t}}();"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports={PN_API:v,unique:e,PNmessage:b,DEF_TIMEOUT:D,timeout:a,build_url:r,each:f,uuid:u,URLBIT:R});var A=1,W="PubNub-JS-Web/3.8.0",X=function(){var e="undefined"!=typeof localStorage&&localStorage;return{get:function(n){try{return e?e.getItem(n):-1==document.cookie.indexOf(n)?null:((document.cookie||"").match(RegExp(n+"=([^;]+)"))||[])[1]||null}catch(t){return}},set:function(n,t){try{if(e)return e.setItem(n,t)&&0;document.cookie=n+"="+t+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(r){return}}}}();L.init=L,L.secure=L,L.crypto_obj=_(),PUBNUB=L({}),"undefined"!=typeof module&&(module.exports=L)||"undefined"!=typeof exports&&(exports.PUBNUB=L)||(PUBNUB=L)}(),function(){var e=PUBNUB.ws=function(n,t){if(!(this instanceof e))return new e(n,t);var r=this,n=r.url=n||"",i=(r.protocol=t||"Sec-WebSocket-Protocol",n.split("/")),o={ssl:"wss:"===i[0],origin:i[2],publish_key:i[3],subscribe_key:i[4],channel:i[5]};return r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,n?(r.pubnub=PUBNUB.init(o),r.pubnub.setup=o,r.setup=o,void r.pubnub.subscribe({restore:!1,channel:o.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(e){r.onmessage({data:e})},connect:function(){r.readyState=r.OPEN,r.onopen()}})):(r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r)};e.prototype.send=function(e){var n=this;n.pubnub.publish({channel:n.pubnub.setup.channel,message:e,callback:function(e){n.onsend({data:e})}})},e.prototype.close=function(){var e=this;e.pubnub.unsubscribe({channel:e.pubnub.setup.channel}),e.readyState=e.CLOSED,e.onclose({})}}();var CryptoJS=CryptoJS||function(e,n){var t={},r=t.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var n=new i;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=n?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var n=this.words,t=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;e>i;i++)n[r+i>>>2]|=(t[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<t.length)for(i=0;e>i;i+=4)n[r+i>>>2]=t[i>>>2];else n.push.apply(n,t);return this.sigBytes+=e,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-8*(t%4),n.length=e.ceil(t/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(n){for(var t=[],r=0;n>r;r+=4)t.push(4294967296*e.random()|0);return new c.init(t,n)}}),a=t.enc={},u=a.Hex={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],r=0;e>r;r++){var i=n[r>>>2]>>>24-8*(r%4)&255;t.push((i>>>4).toString(16)),t.push((15&i).toString(16))}return t.join("")},parse:function(e){for(var n=e.length,t=[],r=0;n>r;r+=2)t[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new c.init(t,n/2)}},s=a.Latin1={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],r=0;e>r;r++)t.push(String.fromCharCode(n[r>>>2]>>>24-8*(r%4)&255));return t.join("")},parse:function(e){for(var n=e.length,t=[],r=0;n>r;r++)t[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new c.init(t,n)}},f=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(n){throw Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t=this._data,r=t.words,i=t.sigBytes,o=this.blockSize,a=i/(4*o),a=n?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(n=a*o,i=e.min(4*n,i),n){for(var u=0;n>u;u+=o)this._doProcessBlock(r,u);u=r.splice(0,n),t.sigBytes-=i}return new c.init(u,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){
return new p.HMAC.init(e,t).finalize(n)}}});var p=t.algo={};return t}(Math);!function(e){for(var n=CryptoJS,t=n.lib,r=t.WordArray,i=t.Hasher,t=n.algo,o=[],c=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,s=0;64>s;){var f;e:{f=u;for(var l=e.sqrt(f),p=2;l>=p;p++)if(!(f%p)){f=!1;break e}f=!0}f&&(8>s&&(o[s]=a(e.pow(u,.5))),c[s]=a(e.pow(u,1/3)),s++),u++}var h=[],t=t.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,n){for(var t=this._hash.words,r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],f=t[6],l=t[7],p=0;64>p;p++){if(16>p)h[p]=0|e[n+p];else{var d=h[p-15],g=h[p-2];h[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+h[p-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+h[p-16]}d=l+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&s^~u&f)+c[p]+h[p],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),l=f,f=s,s=u,u=a+d|0,a=o,o=i,i=r,r=d+g|0}t[0]=t[0]+r|0,t[1]=t[1]+i|0,t[2]=t[2]+o|0,t[3]=t[3]+a|0,t[4]=t[4]+u|0,t[5]=t[5]+s|0,t[6]=t[6]+f|0,t[7]=t[7]+l|0},_doFinalize:function(){var n=this._data,t=n.words,r=8*this._nDataBytes,i=8*n.sigBytes;return t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=e.floor(r/4294967296),t[(i+64>>>9<<4)+15]=r,n.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(t),n.HmacSHA256=i._createHmacHelper(t)}(Math),function(){var e=CryptoJS,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),c=this._iKey=t.clone(),a=o.words,u=c.words,s=0;r>s;s++)a[s]^=1549556828,u[s]^=909522486;o.sigBytes=c.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var n=this._hasher;return e=n.finalize(e),n.reset(),n.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=CryptoJS,n=e.lib.WordArray;e.enc.Base64={stringify:function(e){var n=e.words,t=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;t>i;i+=3)for(var o=(n[i>>>2]>>>24-8*(i%4)&255)<<16|(n[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|n[i+2>>>2]>>>24-8*((i+2)%4)&255,c=0;4>c&&t>i+.75*c;c++)e.push(r.charAt(o>>>6*(3-c)&63));if(n=r.charAt(64))for(;e.length%4;)e.push(n);return e.join("")},parse:function(e){var t=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(t=i));for(var i=[],o=0,c=0;t>c;c++)if(c%4){var a=r.indexOf(e.charAt(c-1))<<2*(c%4),u=r.indexOf(e.charAt(c))>>>6-2*(c%4);i[o>>>2]|=(a|u)<<24-8*(o%4),o++}return n.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function n(e,n,t,r,i,o,c){return e=e+(n&t|~n&r)+i+c,(e<<o|e>>>32-o)+n}function t(e,n,t,r,i,o,c){return e=e+(n&r|t&~r)+i+c,(e<<o|e>>>32-o)+n}function r(e,n,t,r,i,o,c){return e=e+(n^t^r)+i+c,(e<<o|e>>>32-o)+n}function i(e,n,t,r,i,o,c){return e=e+(t^(n|~r))+i+c,(e<<o|e>>>32-o)+n}for(var o=CryptoJS,c=o.lib,a=c.WordArray,u=c.Hasher,c=o.algo,s=[],f=0;64>f;f++)s[f]=4294967296*e.abs(e.sin(f+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,o){for(var c=0;16>c;c++){var a=o+c,u=e[a];e[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,a=e[o+0],u=e[o+1],f=e[o+2],l=e[o+3],p=e[o+4],h=e[o+5],d=e[o+6],g=e[o+7],y=e[o+8],b=e[o+9],v=e[o+10],_=e[o+11],m=e[o+12],k=e[o+13],S=e[o+14],x=e[o+15],w=c[0],C=c[1],O=c[2],E=c[3],w=n(w,C,O,E,a,7,s[0]),E=n(E,w,C,O,u,12,s[1]),O=n(O,E,w,C,f,17,s[2]),C=n(C,O,E,w,l,22,s[3]),w=n(w,C,O,E,p,7,s[4]),E=n(E,w,C,O,h,12,s[5]),O=n(O,E,w,C,d,17,s[6]),C=n(C,O,E,w,g,22,s[7]),w=n(w,C,O,E,y,7,s[8]),E=n(E,w,C,O,b,12,s[9]),O=n(O,E,w,C,v,17,s[10]),C=n(C,O,E,w,_,22,s[11]),w=n(w,C,O,E,m,7,s[12]),E=n(E,w,C,O,k,12,s[13]),O=n(O,E,w,C,S,17,s[14]),C=n(C,O,E,w,x,22,s[15]),w=t(w,C,O,E,u,5,s[16]),E=t(E,w,C,O,d,9,s[17]),O=t(O,E,w,C,_,14,s[18]),C=t(C,O,E,w,a,20,s[19]),w=t(w,C,O,E,h,5,s[20]),E=t(E,w,C,O,v,9,s[21]),O=t(O,E,w,C,x,14,s[22]),C=t(C,O,E,w,p,20,s[23]),w=t(w,C,O,E,b,5,s[24]),E=t(E,w,C,O,S,9,s[25]),O=t(O,E,w,C,l,14,s[26]),C=t(C,O,E,w,y,20,s[27]),w=t(w,C,O,E,k,5,s[28]),E=t(E,w,C,O,f,9,s[29]),O=t(O,E,w,C,g,14,s[30]),C=t(C,O,E,w,m,20,s[31]),w=r(w,C,O,E,h,4,s[32]),E=r(E,w,C,O,y,11,s[33]),O=r(O,E,w,C,_,16,s[34]),C=r(C,O,E,w,S,23,s[35]),w=r(w,C,O,E,u,4,s[36]),E=r(E,w,C,O,p,11,s[37]),O=r(O,E,w,C,g,16,s[38]),C=r(C,O,E,w,v,23,s[39]),w=r(w,C,O,E,k,4,s[40]),E=r(E,w,C,O,a,11,s[41]),O=r(O,E,w,C,l,16,s[42]),C=r(C,O,E,w,d,23,s[43]),w=r(w,C,O,E,b,4,s[44]),E=r(E,w,C,O,m,11,s[45]),O=r(O,E,w,C,x,16,s[46]),C=r(C,O,E,w,f,23,s[47]),w=i(w,C,O,E,a,6,s[48]),E=i(E,w,C,O,g,10,s[49]),O=i(O,E,w,C,S,15,s[50]),C=i(C,O,E,w,h,21,s[51]),w=i(w,C,O,E,m,6,s[52]),E=i(E,w,C,O,l,10,s[53]),O=i(O,E,w,C,v,15,s[54]),C=i(C,O,E,w,u,21,s[55]),w=i(w,C,O,E,y,6,s[56]),E=i(E,w,C,O,x,10,s[57]),O=i(O,E,w,C,d,15,s[58]),C=i(C,O,E,w,k,21,s[59]),w=i(w,C,O,E,p,6,s[60]),E=i(E,w,C,O,_,10,s[61]),O=i(O,E,w,C,f,15,s[62]),C=i(C,O,E,w,b,21,s[63]);c[0]=c[0]+w|0,c[1]=c[1]+C|0,c[2]=c[2]+O|0,c[3]=c[3]+E|0},_doFinalize:function(){var n=this._data,t=n.words,r=8*this._nDataBytes,i=8*n.sigBytes;t[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(t[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n.sigBytes=4*(t.length+1),this._process(),n=this._hash,t=n.words,r=0;4>r;r++)i=t[r],t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return n},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=u._createHelper(c),o.HmacMD5=u._createHmacHelper(c)}(Math),function(){var e=CryptoJS,n=e.lib,t=n.Base,r=n.WordArray,n=e.algo,i=n.EvpKDF=t.extend({cfg:t.extend({keySize:4,hasher:n.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,n){for(var t=this.cfg,i=t.hasher.create(),o=r.create(),c=o.words,a=t.keySize,t=t.iterations;c.length<a;){u&&i.update(u);var u=i.update(e).finalize(n);i.reset();for(var s=1;t>s;s++)u=i.finalize(u),i.reset();o.concat(u)}return o.sigBytes=4*a,o}});e.EvpKDF=function(e,n,t){return i.create(t).compute(e,n)}}(),CryptoJS.lib.Cipher||function(e){var n=CryptoJS,t=n.lib,r=t.Base,i=t.WordArray,o=t.BufferedBlockAlgorithm,c=n.enc.Base64,a=n.algo.EvpKDF,u=t.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,n){return this.create(this._ENC_XFORM_MODE,e,n)},createDecryptor:function(e,n){return this.create(this._DEC_XFORM_MODE,e,n)},init:function(e,n,t){this.cfg=this.cfg.extend(t),this._xformMode=e,this._key=n,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(n,t,r){return("string"==typeof t?d:h).encrypt(e,n,t,r)},decrypt:function(n,t,r){return("string"==typeof t?d:h).decrypt(e,n,t,r)}}}});t.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var s=n.mode={},f=function(n,t,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var o=0;r>o;o++)n[t+o]^=i[o]},l=(t.BlockCipherMode=r.extend({createEncryptor:function(e,n){return this.Encryptor.create(e,n)},createDecryptor:function(e,n){return this.Decryptor.create(e,n)},init:function(e,n){this._cipher=e,this._iv=n}})).extend();l.Encryptor=l.extend({processBlock:function(e,n){var t=this._cipher,r=t.blockSize;f.call(this,e,n,r),t.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),l.Decryptor=l.extend({processBlock:function(e,n){var t=this._cipher,r=t.blockSize,i=e.slice(n,n+r);t.decryptBlock(e,n),f.call(this,e,n,r),this._prevBlock=i}}),s=s.CBC=l,l=(n.pad={}).Pkcs7={pad:function(e,n){for(var t=4*n,t=t-e.sigBytes%t,r=t<<24|t<<16|t<<8|t,o=[],c=0;t>c;c+=4)o.push(r);t=i.create(o,t),e.concat(t)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=u.extend({cfg:u.cfg.extend({mode:s,padding:l}),reset:function(){u.reset.call(this);var e=this.cfg,n=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var t=e.createEncryptor;else t=e.createDecryptor,this._minBufferSize=1;this._mode=t.call(e,this,n&&n.words)},_doProcessBlock:function(e,n){this._mode.processBlock(e,n)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var n=this._process(!0)}else n=this._process(!0),e.unpad(n);return n},blockSize:4});var p=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),s=(n.format={}).OpenSSL={stringify:function(e){var n=e.ciphertext;return e=e.salt,(e?i.create([1398893684,1701076831]).concat(e).concat(n):n).toString(c)},parse:function(e){e=c.parse(e);var n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var t=i.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:t})}},h=t.SerializableCipher=r.extend({cfg:r.extend({format:s}),encrypt:function(e,n,t,r){r=this.cfg.extend(r);var i=e.createEncryptor(t,r);return n=i.finalize(n),i=i.cfg,p.create({ciphertext:n,key:t,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,n,t,r){return r=this.cfg.extend(r),n=this._parse(n,r.format),e.createDecryptor(t,r).finalize(n.ciphertext)},_parse:function(e,n){return"string"==typeof e?n.parse(e,this):e}}),n=(n.kdf={}).OpenSSL={execute:function(e,n,t,r){return r||(r=i.random(8)),e=a.create({keySize:n+t}).compute(e,r),t=i.create(e.words.slice(n),4*t),e.sigBytes=4*n,p.create({key:e,iv:t,salt:r})}},d=t.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:n}),encrypt:function(e,n,t,r){return r=this.cfg.extend(r),t=r.kdf.execute(t,e.keySize,e.ivSize),r.iv=t.iv,e=h.encrypt.call(this,e,n,t.key,r),e.mixIn(t),e},decrypt:function(e,n,t,r){return r=this.cfg.extend(r),n=this._parse(n,r.format),t=r.kdf.execute(t,e.keySize,e.ivSize,n.salt),r.iv=t.iv,h.decrypt.call(this,e,n,t.key,r)}})}(),function(){for(var e=CryptoJS,n=e.lib.BlockCipher,t=e.algo,r=[],i=[],o=[],c=[],a=[],u=[],s=[],f=[],l=[],p=[],h=[],d=0;256>d;d++)h[d]=128>d?d<<1:d<<1^283;for(var g=0,y=0,d=0;256>d;d++){var b=y^y<<1^y<<2^y<<3^y<<4,b=b>>>8^255&b^99;r[g]=b,i[b]=g;var v=h[g],_=h[v],m=h[_],k=257*h[b]^16843008*b;o[g]=k<<24|k>>>8,c[g]=k<<16|k>>>16,a[g]=k<<8|k>>>24,u[g]=k,k=16843009*m^65537*_^257*v^16843008*g,s[b]=k<<24|k>>>8,f[b]=k<<16|k>>>16,l[b]=k<<8|k>>>24,p[b]=k,g?(g=v^h[h[h[m^v]]],y^=h[h[y]]):g=y=1}var S=[0,1,2,4,8,16,32,64,128,27,54],t=t.AES=n.extend({_doReset:function(){for(var e=this._key,n=e.words,t=e.sigBytes/4,e=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],o=0;e>o;o++)if(t>o)i[o]=n[o];else{var c=i[o-1];o%t?t>6&&4==o%t&&(c=r[c>>>24]<<24|r[c>>>16&255]<<16|r[c>>>8&255]<<8|r[255&c]):(c=c<<8|c>>>24,c=r[c>>>24]<<24|r[c>>>16&255]<<16|r[c>>>8&255]<<8|r[255&c],c^=S[o/t|0]<<24),i[o]=i[o-t]^c}for(n=this._invKeySchedule=[],t=0;e>t;t++)o=e-t,c=t%4?i[o]:i[o-4],n[t]=4>t||4>=o?c:s[r[c>>>24]]^f[r[c>>>16&255]]^l[r[c>>>8&255]]^p[r[255&c]]},encryptBlock:function(e,n){this._doCryptBlock(e,n,this._keySchedule,o,c,a,u,r)},decryptBlock:function(e,n){var t=e[n+1];e[n+1]=e[n+3],e[n+3]=t,this._doCryptBlock(e,n,this._invKeySchedule,s,f,l,p,i),t=e[n+1],e[n+1]=e[n+3],e[n+3]=t},_doCryptBlock:function(e,n,t,r,i,o,c,a){for(var u=this._nRounds,s=e[n]^t[0],f=e[n+1]^t[1],l=e[n+2]^t[2],p=e[n+3]^t[3],h=4,d=1;u>d;d++)var g=r[s>>>24]^i[f>>>16&255]^o[l>>>8&255]^c[255&p]^t[h++],y=r[f>>>24]^i[l>>>16&255]^o[p>>>8&255]^c[255&s]^t[h++],b=r[l>>>24]^i[p>>>16&255]^o[s>>>8&255]^c[255&f]^t[h++],p=r[p>>>24]^i[s>>>16&255]^o[f>>>8&255]^c[255&l]^t[h++],s=g,f=y,l=b;g=(a[s>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&p])^t[h++],y=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[p>>>8&255]<<8|a[255&s])^t[h++],b=(a[l>>>24]<<24|a[p>>>16&255]<<16|a[s>>>8&255]<<8|a[255&f])^t[h++],p=(a[p>>>24]<<24|a[s>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^t[h++],e[n]=g,e[n+1]=y,e[n+2]=b,e[n+3]=p},keySize:8});e.AES=n._createHelper(t)}(),CryptoJS.mode.ECB=function(){var e=CryptoJS.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,n){this._cipher.encryptBlock(e,n)}}),e.Decryptor=e.extend({processBlock:function(e,n){this._cipher.decryptBlock(e,n)}}),e}();
})();
!function(){function n(n){s.each(f,function(e){if(e in l&&n in l[e]){var c=l[e][n];c.connected&&(c.connected=!1,c.socket.user_count--,s.events.fire(e+"leave",c))}})}function e(n,c,t,o,i){var a=u(c);s.publish({channel:a.channel,message:{name:n,ns:c,data:t,uuid:r,geo:a.location||[0,0]},callback:function(u){if(u[0])return(i||function(){})(u);var s=2*(o||500);setTimeout(function(){e(n,c,t,s,i)},s>5500?5500:s)}})}function c(n,e){var c=[];return PUBNUB.each(n||[],function(n){e(n)&&c.push(n)}),c}function t(n,e,t){var o=u(n);e.channel=o.channel,s.history(e,function(e){e[0]=c(e[0],function(e){return"message"==e.name&&e.ns==n}),t(e)})}function o(n,e){var c=u(n);s.here_now({channel:c.channel},e)}function i(n){var n=n||function(){};navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){socket.location=[e.coords.latitude,e.coords.longitude],n(socket.location)})||n([0,0])}function u(n){var n=n,c=f[n]||function(){return f[n]={namespace:n,connected:!1,users:l[n]={},user_count:1,get_user_list:function(){return f[n].users},get_user_count:function(){return f[n].user_count},emit:function(c,t,o){e(c,n,t,0,o)},send:function(c,t){e("message",n,c,0,t)},on:function(e,c){"string"==typeof e?s.events.bind(n+e,c):"object"==typeof e&&s.each(e,function(e){s.events.bind(n+e,c)})},disconnect:function(){s.unsubscribe({channel:c.channel})},history:function(e,c){t(n,e,c)},here_now:function(e){o(n,e)}}}();return c}var s=PUBNUB,a=0,r=PUBNUB.db.get("uuid")||s.uuid(function(n){PUBNUB.db.set("uuid",r=n)}),d=function(){return+new Date},f={},l={},v=window.io={connected:{},connect:function(c,t){function o(){U.disconnected||(U.disconnected=1,s.each(f,function(n){s.events.fire(n+"disconnect",{})}))}function h(){var n=s.map(f,function(n){return n});e("ping",w,{nss:n,cuser:p})}var g=(c+"////").split("/"),t=t||{},p=t.user||{},b="presence"in t?t.presence:!0,m=g[2],w=(g[3]||"standard")+"-"+t.channel,B=t.channel,U=u(w);return U.channel=B,U.password="GibberishAES"in window&&t.password,B in v.connected?U:(t.geo&&setInterval(i,15e3)&&i(),t.uuid=r,t.origin=m,s=v.connected[B]=a?s:PUBNUB[U.password?"secure":"init"](t),a=1,U.disconnected=0,s.subscribe({channel:U.channel,disconnect:o,reconnect:function(){s.disconnected=0},connect:function(n,e,c){U.disconnected=0,s.each(f,function(n){var e=u(n);e.connected||(e.connected=!0,s.events.fire(n+"connect",{}))}),h()},presence:b&&function(e){"leave"===e.action&&n(e.uuid),"timeout"===e.action&&n(e.uuid),"join"===e.action&&h()},callback:function(n){U.disconnected&&s.each(f,function(n){s.events.fire(n+"reconnect",{})}),U.disconnected=0;var e=n.data;n.ns in f&&e&&s.events.fire(n.ns+n.name,e),n.uuid&&n.uuid!==r&&"ping"===n.name&&s.each(e.nss,function(c){l[c]=l[c]||{};var t=l[c][n.uuid]=l[c][n.uuid]||function(){return{geo:n.geo||[0,0],uuid:n.uuid,last:d(),socket:U,namespace:c,connected:!1,slot:U.user_count++}}();t.last=d(),t.data=e.cuser,t.connected||(s.events.fire(c+"join",t),t.connected=!0)})}}),b&&(setInterval(h,3e4),h()),U)}}}();
